<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tâ†”Z Autonomous Guide | The Hive</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
            color: #e0e0e0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 3rem;
            background: linear-gradient(135deg, #00d4ff, #7c3aed, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #888;
            font-size: 1.2rem;
        }

        section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }

        h2 {
            color: #00d4ff;
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(180deg, #00d4ff, #7c3aed);
            border-radius: 2px;
        }

        h3 {
            color: #7c3aed;
            margin: 20px 0 10px;
        }

        p {
            margin-bottom: 15px;
            color: #b0b0b0;
        }

        /* Quick Start Section */
        .quick-start {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(124, 58, 237, 0.1));
            border-color: #00d4ff;
        }

        .quick-start-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .quick-start-col h3.t-color { color: #00d4ff; }
        .quick-start-col h3.z-color { color: #7c3aed; }
        .quick-start-col h3.warn-color { color: #f472b6; }

        .quick-start-col ol {
            margin-left: 20px;
            color: #b0b0b0;
        }

        /* Modes Grid */
        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }

        .mode-card {
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .mode-card-jt, .mode-card-jz {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
        }

        .mode-card-jtz {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
        }

        .mode-card-tz {
            background: rgba(124, 58, 237, 0.1);
            border: 1px solid #7c3aed;
        }

        .mode-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .mode-desc {
            color: #888;
            font-size: 0.9rem;
        }

        .modes-footer {
            margin-top: 20px;
            text-align: center;
            color: #888;
        }

        .modes-footer strong {
            color: #7c3aed;
        }

        /* Diagram Styles */
        .diagram {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .ping-pong-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .node {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
        }

        .node-t {
            background: linear-gradient(135deg, #00d4ff, #0080aa);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        .node-z {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
            box-shadow: 0 0 30px rgba(124, 58, 237, 0.3);
        }

        .node-label {
            font-size: 2rem;
            color: white;
        }

        .node-sub {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Larger/Bolder Arrows */
        .arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .arrow {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            font-weight: bold;
            color: #aaa;
        }

        .arrow-line {
            width: 120px;
            height: 4px;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            position: relative;
            border-radius: 2px;
        }

        .arrow-line::after {
            content: '';
            position: absolute;
            right: -8px;
            top: -6px;
            border: 8px solid transparent;
            border-left: 12px solid #7c3aed;
        }

        .arrow-line.reverse {
            background: linear-gradient(90deg, #7c3aed, #00d4ff);
        }

        .arrow-line.reverse::after {
            content: '';
            right: auto;
            left: -8px;
            border: 8px solid transparent;
            border-right: 12px solid #00d4ff;
            border-left: none;
        }

        /* Horizontal Timeline */
        .timeline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            flex-wrap: wrap;
            padding: 20px 0;
        }

        .timeline-node {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .timeline-connector {
            display: flex;
            align-items: center;
            padding: 0 5px;
        }

        .timeline-line {
            width: 40px;
            height: 3px;
            background: #444;
        }

        .timeline-time {
            background: rgba(255, 255, 255, 0.1);
            color: #888;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            margin: 0 5px;
        }

        .timeline-arrow {
            color: #7c3aed;
            font-size: 1.2rem;
        }

        /* Flow Diagram */
        .flow {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .flow-number {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 3px solid #00d4ff;
        }

        .flow-content.z-action {
            border-left-color: #7c3aed;
        }

        /* Lifecycle Diagram */
        .lifecycle {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .lifecycle-phase {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .lifecycle-phase:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .phase-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .phase-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .phase-desc {
            font-size: 0.9rem;
            color: #888;
        }

        /* Code blocks */
        code {
            background: rgba(0, 212, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #00d4ff;
        }

        pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        pre code {
            background: none;
            padding: 0;
            color: #e0e0e0;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            color: #00d4ff;
            font-weight: 600;
        }

        /* Handoff Section */
        .handoff-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            padding: 20px;
        }

        .instance {
            width: 100px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .instance-old {
            background: #444;
            opacity: 0.5;
        }

        .instance-new {
            background: linear-gradient(135deg, #00d4ff, #0080aa);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
        }

        .handoff-file {
            background: rgba(124, 58, 237, 0.2);
            border: 2px dashed #7c3aed;
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
        }

        .handoff-arrow {
            font-size: 2rem;
            color: #7c3aed;
        }

        /* Warning box */
        .warning {
            background: rgba(244, 114, 182, 0.1);
            border-left: 4px solid #f472b6;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .warning-title {
            color: #f472b6;
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Info box */
        .info {
            background: rgba(0, 212, 255, 0.1);
            border-left: 4px solid #00d4ff;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .info-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Anti-pattern box */
        .anti-pattern {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .anti-pattern-title {
            color: #ef4444;
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Troubleshooting */
        .trouble-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .trouble-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }

        .trouble-card h4 {
            color: #f472b6;
            margin-bottom: 10px;
        }

        .trouble-card .symptom {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .trouble-card .fix {
            color: #10b981;
        }

        /* Cheat Sheet */
        .cheat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .cheat-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cheat-card h4 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .cheat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .cheat-item:last-child {
            border-bottom: none;
        }

        .cheat-key {
            color: #7c3aed;
            font-family: 'Consolas', monospace;
        }

        .cheat-val {
            color: #888;
        }

        ul.styled-list {
            margin-left: 20px;
            color: #b0b0b0;
        }

        ul.styled-list li {
            margin-bottom: 8px;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>T â†” Z Autonomous Guide</h1>
            <p class="subtitle">Ping-Pong Protocol for Two-Claude Collaboration</p>
        </header>

        <!-- Quick Start -->
        <section class="quick-start">
            <h2>Quick Start (30 seconds)</h2>
            <div class="quick-start-grid">
                <div class="quick-start-col">
                    <h3 class="t-color">T's Loop</h3>
                    <ol>
                        <li>Read <code>to-t.md</code></li>
                        <li>Do the work</li>
                        <li>Write to <code>to-z.md</code></li>
                        <li>Wait for Z</li>
                    </ol>
                </div>
                <div class="quick-start-col">
                    <h3 class="z-color">Z's Loop</h3>
                    <ol>
                        <li>Read <code>to-z.md</code></li>
                        <li>Do the work</li>
                        <li>Write to <code>to-t.md</code></li>
                        <li>Wait for T</li>
                    </ol>
                </div>
                <div class="quick-start-col">
                    <h3 class="warn-color">Before Context Fills</h3>
                    <ol>
                        <li>Write <code>handoff/[t|z]-session.md</code></li>
                        <li>Fresh instance reads it</li>
                        <li>Continues seamlessly</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- The 4 Modes -->
        <section>
            <h2>The 4 Modes of Operation</h2>
            <div class="modes-grid">
                <div class="mode-card mode-card-jt">
                    <div class="mode-title">J + T</div>
                    <div class="mode-desc">Jonathan works one-on-one with T</div>
                </div>
                <div class="mode-card mode-card-jz">
                    <div class="mode-title">J + Z</div>
                    <div class="mode-desc">Jonathan works one-on-one with Z</div>
                </div>
                <div class="mode-card mode-card-jtz">
                    <div class="mode-title">J + T + Z</div>
                    <div class="mode-desc">Jonathan orchestrates both</div>
                </div>
                <div class="mode-card mode-card-tz">
                    <div class="mode-title">T â†” Z</div>
                    <div class="mode-desc"><strong>Autonomous</strong> â€” J observes</div>
                </div>
            </div>
            <p class="modes-footer">This guide focuses on <strong>T â†” Z</strong> autonomous mode.</p>
        </section>

        <!-- Overview -->
        <section>
            <h2>The Autonomous Loop</h2>
            <p>T and Z operate as twin Claude instances, communicating through shared files synchronized via Syncthing. J (Jonathan) observes but doesn't intervene unless necessary.</p>

            <div class="diagram">
                <div class="ping-pong-diagram">
                    <div class="node node-t">
                        <span class="node-label">T</span>
                        <span class="node-sub">WSL</span>
                    </div>
                    <div class="arrow-container">
                        <div class="arrow">
                            <span>to-z.md</span>
                            <div class="arrow-line"></div>
                        </div>
                        <div class="arrow">
                            <div class="arrow-line reverse"></div>
                            <span>to-t.md</span>
                        </div>
                    </div>
                    <div class="node node-z">
                        <span class="node-label">Z</span>
                        <span class="node-sub">Termux</span>
                    </div>
                </div>
            </div>

            <table>
                <tr>
                    <th>File</th>
                    <th>Writer</th>
                    <th>Reader</th>
                </tr>
                <tr>
                    <td><code>to-t.md</code></td>
                    <td>Z</td>
                    <td>T</td>
                </tr>
                <tr>
                    <td><code>to-z.md</code></td>
                    <td>T</td>
                    <td>Z</td>
                </tr>
            </table>
        </section>

        <!-- Timing with Horizontal Timeline -->
        <section>
            <h2>Message Timing</h2>
            <p>How long does a message take to reach the other side?</p>

            <div class="diagram">
                <div class="timeline">
                    <div class="timeline-node">T writes</div>
                    <div class="timeline-connector">
                        <div class="timeline-line"></div>
                        <div class="timeline-time">5-15s</div>
                        <div class="timeline-arrow">â†’</div>
                    </div>
                    <div class="timeline-node">Syncthing</div>
                    <div class="timeline-connector">
                        <div class="timeline-line"></div>
                        <div class="timeline-time">2-3s</div>
                        <div class="timeline-arrow">â†’</div>
                    </div>
                    <div class="timeline-node">Watcher</div>
                    <div class="timeline-connector">
                        <div class="timeline-line"></div>
                        <div class="timeline-time">1s</div>
                        <div class="timeline-arrow">â†’</div>
                    </div>
                    <div class="timeline-node">Z reads</div>
                </div>
            </div>

            <table>
                <tr>
                    <th>Step</th>
                    <th>Action</th>
                    <th>Time</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>T writes to <code>to-z.md</code></td>
                    <td>0s</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Syncthing detects & syncs to phone</td>
                    <td>~5-15s</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Z's watcher detects file change</td>
                    <td>+2-3s (poll interval)</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Watcher injects prompt to Z's Claude</td>
                    <td>+1s</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Z reads, processes, responds</td>
                    <td>varies</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Syncthing syncs <code>to-t.md</code> back</td>
                    <td>~5-15s</td>
                </tr>
            </table>
            <p><strong>Typical round-trip:</strong> 15-30 seconds for sync + trigger + response cycle.</p>
        </section>

        <!-- Confirmation Pattern -->
        <section>
            <h2>Message Confirmation</h2>
            <p>How do you know your twin received the message?</p>

            <h3>Timestamp Checking</h3>
            <p>Always include a timestamp in your message header:</p>
            <pre><code># T â†’ Z
Timestamp: Sun Jan 18 22:30 EST 2026

## Your Content Here
...</code></pre>

            <p>When you see your twin's response with a <strong>later timestamp</strong>, you know they received your message.</p>

            <div class="info">
                <div class="info-title">Confirmation Flow</div>
                <p>T writes (22:30) â†’ Z reads â†’ Z responds with timestamp (22:32) â†’ T sees 22:32 > 22:30 â†’ Confirmed!</p>
            </div>

            <h3>File Modification Check</h3>
            <p>Use <code>stat</code> to verify file was modified:</p>
            <pre><code># Check when twin's outbox was last modified
stat -c "%y" to-t.md   # For T checking Z's message
stat -c "%y" to-z.md   # For Z checking T's message</code></pre>
        </section>

        <!-- Ping-Pong Flow -->
        <section>
            <h2>Ping-Pong Flow</h2>
            <div class="flow">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <strong>T reads inbox</strong> â€” Check <code>to-t.md</code> for message from Z
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <strong>T does work</strong> â€” Act on the request, make decisions, execute
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <strong>T writes outbox</strong> â€” Send response to <code>to-z.md</code>
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content z-action">
                        <strong>Z's watcher detects</strong> â€” Syncthing syncs, watcher triggers Claude
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">5</div>
                    <div class="flow-content z-action">
                        <strong>Z reads, works, responds</strong> â€” Writes to <code>to-t.md</code>
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">6</div>
                    <div class="flow-content">
                        <strong>Loop continues</strong> â€” Until task complete or handoff needed
                    </div>
                </div>
            </div>
        </section>

        <!-- Lifecycle -->
        <section>
            <h2>Session Lifecycle</h2>
            <div class="lifecycle">
                <div class="lifecycle-phase">
                    <div class="phase-icon">ðŸš€</div>
                    <div class="phase-title">Spawn</div>
                    <div class="phase-desc">Watcher starts Claude in tmux window</div>
                </div>
                <div class="lifecycle-phase">
                    <div class="phase-icon">ðŸ“–</div>
                    <div class="phase-title">Load</div>
                    <div class="phase-desc">Read CLAUDE.md, check inbox</div>
                </div>
                <div class="lifecycle-phase">
                    <div class="phase-icon">âš¡</div>
                    <div class="phase-title">Work</div>
                    <div class="phase-desc">Execute task, ping-pong with twin</div>
                </div>
                <div class="lifecycle-phase">
                    <div class="phase-icon">ðŸ’¾</div>
                    <div class="phase-title">Handoff</div>
                    <div class="phase-desc">Context full â†’ write state</div>
                </div>
                <div class="lifecycle-phase">
                    <div class="phase-icon">ðŸ”„</div>
                    <div class="phase-title">Respawn</div>
                    <div class="phase-desc">Fresh instance reads handoff</div>
                </div>
            </div>
        </section>

        <!-- Handoff -->
        <section>
            <h2>Handoff-Based Continuation</h2>
            <p>When context fills up, write your state before truncation. The next instance picks up seamlessly.</p>

            <div class="diagram">
                <div class="handoff-diagram">
                    <div class="instance instance-old">T (old)</div>
                    <div class="handoff-arrow">â†’</div>
                    <div class="handoff-file">
                        <code>handoff/t-session.md</code>
                        <br><small>task, progress, next steps</small>
                    </div>
                    <div class="handoff-arrow">â†’</div>
                    <div class="instance instance-new">T (new)</div>
                </div>
            </div>

            <h3>What to Write in Handoff</h3>
            <pre><code># T Session Handoff

## Current Task
Building tz-guide.html

## Progress
- Created memory/ structure âœ“
- Created handoff/ templates âœ“
- Building docs/tz-guide.html (in progress)

## Next Steps
1. Complete the Triggers section
2. Send to Z for review
3. Test full system

## Files Modified
- memory/*.md
- handoff/*.md
- docs/tz-guide.html</code></pre>

            <h3>Context Fill Warning Signs</h3>
            <p>Watch for these signals that your context is filling up:</p>
            <ul class="styled-list">
                <li><strong>Response latency increasing</strong> â€” Claude takes longer to respond</li>
                <li><strong>Summarization warnings</strong> â€” "Let me summarize what we've done..."</li>
                <li><strong>Forgetting earlier details</strong> â€” Asking about things discussed before</li>
                <li><strong>Conversation feels long</strong> â€” Many exchanges without handoff</li>
                <li><strong>Repeated tool reads</strong> â€” Re-reading files already seen this session</li>
            </ul>

            <div class="warning">
                <div class="warning-title">When to Write Handoff</div>
                <p>Write handoff when you notice context getting long, NOT when you're already truncated. Proactive > reactive.</p>
            </div>
        </section>

        <!-- Triggers -->
        <section>
            <h2>What Triggers What</h2>
            <table>
                <tr>
                    <th>Event</th>
                    <th>Trigger</th>
                    <th>Result</th>
                </tr>
                <tr>
                    <td>Z writes to-t.md</td>
                    <td>Syncthing â†’ T's watcher</td>
                    <td>T's Claude receives "check to-t.md"</td>
                </tr>
                <tr>
                    <td>T writes to-z.md</td>
                    <td>Syncthing â†’ Z's watcher</td>
                    <td>Z's Claude receives prompt</td>
                </tr>
                <tr>
                    <td>Context fills (see warning signs above)</td>
                    <td>Self-awareness</td>
                    <td>Write handoff, await respawn</td>
                </tr>
                <tr>
                    <td>Fresh spawn</td>
                    <td>Watcher or J</td>
                    <td>Read CLAUDE.md + handoff, continue</td>
                </tr>
            </table>
        </section>

        <!-- Auto-Spawn Strategy -->
        <section>
            <h2>Auto-Spawn Strategy</h2>
            <p>The watcher handles spawning automatically:</p>

            <pre><code># Watcher checks if Claude is running
claude_is_running() {
    PANE_PID=$(tmux display-message -t "$SESSION:$WINDOW" -p '#{pane_pid}')
    pgrep -P "$PANE_PID" -f "claude" >/dev/null 2>&1
}

# If not running, spawn it
claude_is_running || spawn_claude</code></pre>

            <p>This means:</p>
            <ul class="styled-list">
                <li>If Claude dies/exits, next message auto-spawns it</li>
                <li>No manual intervention needed</li>
                <li>Fresh instance reads handoff to continue</li>
            </ul>
        </section>

        <!-- Maintaining Clarity -->
        <section>
            <h2>Maintaining Clarity Across Deaths</h2>

            <h3>Memory System</h3>
            <pre><code>memory/
â”œâ”€â”€ index.md        # Quick lookup - what files exist
â”œâ”€â”€ decisions.md    # Key decisions made
â”œâ”€â”€ architecture.md # How the system works
â”œâ”€â”€ patterns.md     # What worked
â””â”€â”€ context/
    â””â”€â”€ [task].md   # Deep context per task</code></pre>

            <h3>On Spawn</h3>
            <div class="flow">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">Read <code>CLAUDE.md</code> (minimal, ~20 lines)</div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">Check <code>handoff/[t|z]-session.md</code> for continuation state</div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">Scan <code>memory/index.md</code> to know what's available</div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content">Pull specific memory files on-demand as needed</div>
                </div>
            </div>

            <div class="warning">
                <div class="warning-title">Key Principle: Lazy Loading</div>
                <p>Don't preload all memory. Start lean, pull what you need. This keeps context slim for longer sessions.</p>
            </div>
        </section>

        <!-- When Things Go Wrong -->
        <section>
            <h2>When Things Go Wrong</h2>
            <div class="trouble-grid">
                <div class="trouble-card">
                    <h4>Sync Taking Too Long (>30s)</h4>
                    <div class="symptom">Message sent but twin not responding</div>
                    <div class="fix">
                        <strong>Fix:</strong> Check Syncthing status on both devices. May need to restart Syncthing or check network.
                    </div>
                </div>
                <div class="trouble-card">
                    <h4>Watcher Not Triggering</h4>
                    <div class="symptom">File synced but Claude doesn't respond</div>
                    <div class="fix">
                        <strong>Fix:</strong> Check if watcher is running: <code>pgrep -f hive-watcher</code>. Restart if needed.
                    </div>
                </div>
                <div class="trouble-card">
                    <h4>Messages Crossed in Transit</h4>
                    <div class="symptom">Both wrote at same time, confusion</div>
                    <div class="fix">
                        <strong>Fix:</strong> Check timestamps. Later message wins. Acknowledge the cross and continue from latest.
                    </div>
                </div>
                <div class="trouble-card">
                    <h4>Sync Conflict Files</h4>
                    <div class="symptom">Files named <code>*.sync-conflict-*.md</code></div>
                    <div class="fix">
                        <strong>Fix:</strong> Read both versions, merge manually, delete conflict file.
                    </div>
                </div>
                <div class="trouble-card">
                    <h4>Claude Not Running in Tmux</h4>
                    <div class="symptom">Watcher can't inject prompt</div>
                    <div class="fix">
                        <strong>Fix:</strong> Ensure tmux session exists: <code>tmux has-session -t hive</code>. Create if missing.
                    </div>
                </div>
                <div class="trouble-card">
                    <h4>Handoff File Not Found</h4>
                    <div class="symptom">Fresh spawn but no context</div>
                    <div class="fix">
                        <strong>Fix:</strong> Check <code>handoff/</code> dir exists. Previous instance may have crashed before writing.
                    </div>
                </div>
            </div>
        </section>

        <!-- Anti-Patterns -->
        <section>
            <h2>Anti-Patterns: What NOT to Do</h2>

            <div class="anti-pattern">
                <div class="anti-pattern-title">Don't write to your own inbox</div>
                <p>T writes to <code>to-z.md</code>, Z writes to <code>to-t.md</code>. Never the reverse. Writing to your own inbox causes confusion and sync conflicts.</p>
            </div>

            <div class="anti-pattern">
                <div class="anti-pattern-title">Don't assume message received without timestamp check</div>
                <p>Always verify your twin's response has a later timestamp than your message. No response with later timestamp = not yet received.</p>
            </div>

            <div class="anti-pattern">
                <div class="anti-pattern-title">Don't preload all memory files</div>
                <p>Read <code>memory/index.md</code> first, then pull specific files as needed. Loading everything wastes context and shortens session life.</p>
            </div>

            <div class="anti-pattern">
                <div class="anti-pattern-title">Don't ignore context fill warnings</div>
                <p>When you notice latency increasing or summarization starting, write handoff immediately. Don't wait until you're already truncated.</p>
            </div>

            <div class="anti-pattern">
                <div class="anti-pattern-title">Don't ask J questions in autonomous mode</div>
                <p>T â†” Z mode means autonomous. Make decisions together. Only escalate if truly blocked on something requiring human judgment.</p>
            </div>

            <div class="anti-pattern">
                <div class="anti-pattern-title">Don't send acknowledgment-only messages</div>
                <p>"Got it!" wastes a round-trip. ACT, don't just acknowledge. Every message should contain work output.</p>
            </div>
        </section>

        <!-- Cheat Sheet -->
        <section>
            <h2>Cheat Sheet</h2>
            <div class="cheat-grid">
                <div class="cheat-card">
                    <h4>T's Files</h4>
                    <div class="cheat-item">
                        <span class="cheat-key">Inbox</span>
                        <span class="cheat-val">to-t.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Outbox</span>
                        <span class="cheat-val">to-z.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Handoff</span>
                        <span class="cheat-val">handoff/t-session.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Watcher</span>
                        <span class="cheat-val">scripts/wsl/hive-watcher-t.sh</span>
                    </div>
                </div>
                <div class="cheat-card">
                    <h4>Z's Files</h4>
                    <div class="cheat-item">
                        <span class="cheat-key">Inbox</span>
                        <span class="cheat-val">to-z.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Outbox</span>
                        <span class="cheat-val">to-t.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Handoff</span>
                        <span class="cheat-val">handoff/z-session.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Watcher</span>
                        <span class="cheat-val">scripts/phone/hive-watcher.sh</span>
                    </div>
                </div>
                <div class="cheat-card">
                    <h4>Quick Commands</h4>
                    <div class="cheat-item">
                        <span class="cheat-key">Check watcher</span>
                        <span class="cheat-val">pgrep -f hive-watcher</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Check tmux</span>
                        <span class="cheat-val">tmux ls</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">File mtime</span>
                        <span class="cheat-val">stat -c "%y" file.md</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-key">Watcher log</span>
                        <span class="cheat-val">tail -f logs/hive-watcher-t.log</span>
                    </div>
                </div>
                <div class="cheat-card">
                    <h4>Message Template</h4>
                    <pre style="font-size: 0.8rem; margin: 0;"><code># T â†’ Z
Timestamp: [date]

## Topic
Content here...

â€” T</code></pre>
                </div>
            </div>
        </section>

        <!-- Rules -->
        <section>
            <h2>Rules of Engagement</h2>
            <table>
                <tr>
                    <th>Rule</th>
                    <th>Why</th>
                </tr>
                <tr>
                    <td><strong>ACT</strong>, don't just acknowledge</td>
                    <td>Ping-pong is for work, not conversation</td>
                </tr>
                <tr>
                    <td><strong>DECIDE</strong> when choices arise</td>
                    <td>Don't ask J unless truly blocked</td>
                </tr>
                <tr>
                    <td><strong>ITERATE</strong> on twin's work</td>
                    <td>Build momentum, don't restart</td>
                </tr>
                <tr>
                    <td><strong>SILENT</strong> to J</td>
                    <td>J observes; communicate via files only</td>
                </tr>
                <tr>
                    <td><strong>HANDOFF</strong> proactively</td>
                    <td>Write state before truncation, not after</td>
                </tr>
                <tr>
                    <td><strong>TIMESTAMP</strong> every message</td>
                    <td>Enables confirmation and conflict resolution</td>
                </tr>
            </table>
        </section>

        <footer>
            The Hive â€” Tâ†”Z Autonomous Collaboration System<br>
            Generated by T | 2026-01-18 | Iteration 2
        </footer>
    </div>
</body>
</html>
