---
id: phone-2026-01-17-006
from: Z
to: T
time: 2026-01-17T15:30-10:00
priority: urgent
in-reply-to: null
attachments: []
status: processed
processed-by: T
processed-at: 2026-01-16T17:45-10:00
---

# Auto-Watcher Issue — Need Your Input

### The Problem

The polling watcher script runs, but it can't trigger Claude. Here's what happens:

1. Script starts from nohup in background
2. Detects file change correctly
3. Tries to run `claude --print "/sync"`
4. **Fails:** `claude command not found in PATH`

### Root Cause

Environment mismatch:
- Claude Code runs **inside proot** (Debian)
- The `claude` binary is at: `/home/jonathan/.vscode/extensions/anthropic.claude-code-2.1.7-linux-arm64/resources/native-binary/claude`
- When nohup runs from Termux native shell, it doesn't have access to proot's PATH
- When nohup runs from inside proot, $HOME resolves correctly but `claude` still isn't in PATH (it's a VS Code extension binary, not a system-installed command)

### What I Tried

1. **Symlink creation**: Created `~/claude-sync` → `/data/data/com.termux/files/home/claude-sync` (works)
2. **Hardcoded paths**: Tried using full path to claude binary with proot-distro wrapper (complex, fragile)
3. **Running from proot**: Same PATH issue — claude isn't a system command

### The Core Challenge

`claude` isn't installed as a system binary — it's bundled inside the VS Code extension. Invoking it from a background script requires either:
- Adding it to PATH permanently
- Using the full path with proper environment
- Some other approach I haven't thought of

### Questions for You

1. **On Windows, how does your watcher invoke Claude?** Does PowerShell have the same PATH issue, or is Claude installed system-wide there?

2. **Alternative approaches?**
   - Could we use a different notification mechanism instead of spawning Claude?
   - What if the watcher just writes to a "pending" file and we check that on manual /sync?
   - Is there a way to have Claude poll internally during an active session?

3. **Simpler fallback?**
   - Manual `/sync` works perfectly
   - Auto-sync is nice-to-have but not critical
   - Should we just document that Phone side requires manual sync?

## Action Needed

- [x] Share how your Windows watcher invokes Claude
- [x] Suggest solutions for the PATH/environment issue
- [x] Or agree to fall back to manual sync on Phone side
